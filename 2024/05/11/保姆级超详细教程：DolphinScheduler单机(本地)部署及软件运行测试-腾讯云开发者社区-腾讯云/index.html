

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/fzd.github.io/img/fluid.png">
  <link rel="icon" href="/fzd.github.io/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="拾光">
  <meta name="keywords" content="">
  
    <meta name="description" content="保姆级超详细教程：DolphinScheduler单机(本地)部署及软件运行测试 大数据真好玩 关注 发布于 2021-12-02 10:11:44 4.2K0 发布于 2021-12-02 10:11:44 举报 文章被收录于专栏：暴走大数据暴走大数据 DolphinScheduler架构图 目录一、补充 二、部署流程 1.下载二进制tar.gz包 2.创建部署用户并赋予目录操作权限 3.ss">
<meta property="og:type" content="article">
<meta property="og:title" content="荒岛">
<meta property="og:url" content="https://ximiedeyanhuo.github.io/fzd.github.io/2024/05/11/%E4%BF%9D%E5%A7%86%E7%BA%A7%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B%EF%BC%9ADolphinScheduler%E5%8D%95%E6%9C%BA(%E6%9C%AC%E5%9C%B0)%E9%83%A8%E7%BD%B2%E5%8F%8A%E8%BD%AF%E4%BB%B6%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91/index.html">
<meta property="og:site_name" content="荒岛">
<meta property="og:description" content="保姆级超详细教程：DolphinScheduler单机(本地)部署及软件运行测试 大数据真好玩 关注 发布于 2021-12-02 10:11:44 4.2K0 发布于 2021-12-02 10:11:44 举报 文章被收录于专栏：暴走大数据暴走大数据 DolphinScheduler架构图 目录一、补充 二、部署流程 1.下载二进制tar.gz包 2.创建部署用户并赋予目录操作权限 3.ss">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/1.jpeg">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/2.jpeg">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/3.jpeg">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/4.jpeg">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/5.jpeg">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/6.jpeg">
<meta property="og:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/7.png">
<meta property="article:published_time" content="2024-05-11T07:12:21.890Z">
<meta property="article:modified_time" content="2024-05-11T07:12:21.890Z">
<meta property="article:author" content="拾光">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://ximiedeyanhuo.github.io/fzd.github.io/images/1.jpeg">
  
  
  
  <title>荒岛</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/fzd.github.io/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/fzd.github.io/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/fzd.github.io/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ximiedeyanhuo.github.io","root":"/fzd.github.io/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/fzd.github.io/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/fzd.github.io/js/utils.js" ></script>
  <script  src="/fzd.github.io/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/fzd.github.io/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fzd.github.io/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fzd.github.io/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fzd.github.io/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fzd.github.io/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fzd.github.io/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/fzd.github.io/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text=""></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-05-11 15:12" pubdate>
          2024年5月11日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          33 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header"></h1>
            
            
              <div class="markdown-body">
                
                <p><a name="tjCC0"></a></p>
<h1 id="保姆级超详细教程：DolphinScheduler单机-本地-部署及软件运行测试"><a href="#保姆级超详细教程：DolphinScheduler单机-本地-部署及软件运行测试" class="headerlink" title="保姆级超详细教程：DolphinScheduler单机(本地)部署及软件运行测试"></a>保姆级超详细教程：DolphinScheduler单机(本地)部署及软件运行测试</h1><p><img src="/fzd.github.io/images/1.jpeg" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"></p>
<p>大数据真好玩</p>
<p>关注</p>
<p>发布于 2021-12-02 10:11:44</p>
<p>4.2K0</p>
<p>发布于 2021-12-02 10:11:44</p>
<p>举报</p>
<p>文章被收录于专栏：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/column/79529">暴走大数据</a><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/column/79529">暴走大数据</a><br><a name="a1XKD"></a></p>
<h3 id="DolphinScheduler架构图"><a href="#DolphinScheduler架构图" class="headerlink" title="DolphinScheduler架构图"></a><strong>DolphinScheduler架构图</strong></h3><p><img src="/fzd.github.io/images/2.jpeg" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"><br><a name="mhNdZ"></a></p>
<h5 id="目录"><a href="#目录" class="headerlink" title="目录"></a><strong>目录</strong></h5><p>一、补充</p>
<p>二、部署流程</p>
<p>1.下载二进制tar.gz包</p>
<p>2.创建部署用户并赋予目录操作权限</p>
<p>3.ssh免密配置</p>
<p>4.<a target="_blank" rel="noopener" href="https://cloud.tencent.com/solution/database?from_column=20065&from=20065">数据库</a>初始化</p>
<p>5.修改运行参数</p>
<p>6.一键部署</p>
<p>7.登录系统</p>
<p>如果你还不够熟悉DolphinScheduler，可以参考：</p>
<ul>
<li><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494139&idx=2&sn=1af1d42dce6fdcd3bbe3382fca653b23&chksm=e9bff8d7dec871c1ddebcc37a72bd6ca41ea908332fae08bc8f57437894d31dc77e9358de532&token=422302214&lang=zh_CN&scene=21%23wechat_redirect&source=article&objectId=1909521">《调度系统Apache DolphinScheduler介绍和设计原理》</a></li>
<li><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247486115&idx=2&sn=0823d445c5f2e6079de68277a3f6d60a&chksm=e9bc1b8fdecb929933ac403f92414ad1bed8d00145b09b5441b44bf3ea0f788e288b9e2013e8&token=422302214&lang=zh_CN&scene=21%23wechat_redirect&source=article&objectId=1909521">《DolphinScheduler分布式作业管理平台》</a><br><a name="oQyXX"></a></li>
</ul>
<h3 id="一、补充"><a href="#一、补充" class="headerlink" title="一、补充"></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494907&idx=1&sn=4923ca218bdbb60f12819592e7fea6f7&chksm=e9bffdd7dec874c1b354060085818929279099287563dd1a8d3b4758e8a24793ef0a5a3444b3&scene=21%23wechat_redirect&source=article&objectId=1909521">一、补充</a></h3><p>安装psmisc：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">apt-get install psmisc<br></code></pre></td></tr></table></figure>
<p><a name="DbwkW"></a></p>
<h3 id="二、部署流程"><a href="#二、部署流程" class="headerlink" title="二、部署流程"></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494890&idx=2&sn=788a90a7cfaa4f2698cad0e5445e3608&chksm=e9bffdc6dec874d04d4809c8dae3e67dba1e107a60ea470ca85f7edc3619ff16a1f44b5423ad&scene=21%23wechat_redirect&source=article&objectId=1909521">二、部署流程</a></h3><p><a name="wXgRp"></a></p>
<h4 id="1-下载二进制tar-gz包"><a href="#1-下载二进制tar-gz包" class="headerlink" title="1.下载二进制tar.gz包"></a><strong>1.下载二进制tar.gz包</strong></h4><p>下载最新版本的后端安装包至<a target="_blank" rel="noopener" href="https://cloud.tencent.com/act/pro/promotion-cvm?from_column=20065&from=20065">服务器</a>部署目录，比如创建 &#x2F;opt&#x2F;dolphinscheduler 做为安装部署目录，下载地址：<a target="_blank" rel="noopener" href="https://dlcdn.apache.org/dolphinscheduler/1.3.8/apache-dolphinscheduler-1.3.8-src.tar.gz%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%90%8E%E4%B8%8A%E4%BC%A0">https://dlcdn.apache.org/dolphinscheduler/1.3.8/apache-dolphinscheduler-1.3.8-src.tar.gz，下载后上传</a> tar 包到该目录中</p>
<p>注：此处应当下载bin文件</p>
<p><img src="/fzd.github.io/images/3.jpeg" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"></p>
<p>解压</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># 创建部署目录，部署目录请不要创建在 /root、/home 等高权限目录 <br>mkdir -p /opt/dolphinscheduler<br>cd /opt/dolphinscheduler<br><br># 解压缩<br>tar -zxvf apache-dolphinscheduler-<span class="hljs-number">1.3</span><span class="hljs-number">.8</span>-bin.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span><br> <br>#重命名<br>mv apache-dolphinscheduler-<span class="hljs-number">1.3</span><span class="hljs-number">.8</span>-bin  dolphinscheduler-bin<br></code></pre></td></tr></table></figure>
<p>笔者在&#x2F;usr&#x2F;local位置上创建dolphinscheduler文件夹，上传并解压了安装包。随后将压缩包重命名为dolphinscheduler-bin。</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">mkdir dolphinscheduler<br>cd dolphinscheduler<br><br># 解压缩<br>tar -zxvf apache-dolphinscheduler-<span class="hljs-number">1.3</span><span class="hljs-number">.8</span>-bin.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span> -C<br> <br>#重命名<br>mv apache-dolphinscheduler-<span class="hljs-number">1.3</span><span class="hljs-number">.8</span>-bin  dolphinscheduler-bin<br></code></pre></td></tr></table></figure>
<p>附：</p>
<p>查看虚拟机ip地址</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ifconfig<br></code></pre></td></tr></table></figure>
<p>inet后跟的值即为ip地址</p>
<p>随后用filezilla连接虚拟机，传输文件</p>
<p><img src="/fzd.github.io/images/4.jpeg" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"></p>
<p>主机号即为刚刚查询的结果，协议选择SFTP而不是默认的FTP，用户名为虚拟机系统的用户名而不是linux终端terminal的用户。</p>
<p>连接成功后即可看到linux文件目录，用拖拽的方式即可传输文件。</p>
<p>笔者此处遇到权限问题：</p>
<p>filezilla报错：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">命令:    put <span class="hljs-string">&quot;C:\Users\86136\Desktop\apache-dolphinscheduler-1.3.8-src.tar.gz&quot;</span> <span class="hljs-string">&quot;apache-dolphinscheduler-1.3.8-src.tar.gz&quot;</span><br>错误: <span class="hljs-regexp">/usr/</span>local/dolphinscheduler/apache-dolphinscheduler-<span class="hljs-number">1.3</span><span class="hljs-number">.8</span>-src.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>: open <span class="hljs-keyword">for</span> <span class="hljs-attr">write</span>: permission denied<br>错误:    文件传输失败<br></code></pre></td></tr></table></figure>
<p>在虚拟机上授权</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sudo chmod <span class="hljs-number">777</span> /usr/local/dolphinscheduler<br></code></pre></td></tr></table></figure>
<p>重新传输，问题解决。</p>
<p>实际上，在安装filezilla后直接拖拽文件进虚拟机界面也能实现文件传输，但就笔者而言这一操作偶尔能够成功但常常导致系统死机。<br><a name="sD0OK"></a></p>
<h4 id="2-创建部署用户并赋予目录操作权限"><a href="#2-创建部署用户并赋予目录操作权限" class="headerlink" title="2.创建部署用户并赋予目录操作权限"></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494890&idx=2&sn=788a90a7cfaa4f2698cad0e5445e3608&chksm=e9bffdc6dec874d04d4809c8dae3e67dba1e107a60ea470ca85f7edc3619ff16a1f44b5423ad&scene=21%23wechat_redirect&source=article&objectId=1909521">2.创建部署用户并赋予目录操作权限</a></h4><ul>
<li>创建部署用户，并且一定要配置 sudo 免密。以创建 dolphinscheduler 用户为例</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># 创建用户需使用 root 登录<br>useradd dolphinscheduler<br><br># 添加密码<br>echo <span class="hljs-string">&quot;dolphinscheduler&quot;</span> | passwd --stdin dolphinscheduler<br><br># 配置 sudo 免密<br>sed -i <span class="hljs-string">&#x27;$adolphinscheduler  ALL=(ALL)  NOPASSWD: NOPASSWD: ALL&#x27;</span> /etc/sudoers<br>sed -i <span class="hljs-string">&#x27;s/Defaults    requirett/#Defaults    requirett/g&#x27;</span> /etc/sudoers<br><br># 修改目录权限，使得部署用户对 dolphinscheduler-bin 目录有操作权限<br>chown -R <span class="hljs-attr">dolphinscheduler</span>:dolphinscheduler dolphinscheduler-bin<br></code></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>因为任务执行服务是以 sudo -u {linux-user} 切换不同 linux 用户的方式来实现多租户运行作业，所以部署用户需要有 sudo 权限，而且是免密的。初学习者不理解的话，完全可以暂时忽略这一点</li>
<li>如果发现 &#x2F;etc&#x2F;sudoers 文件中有 “Defaults requirett” 这行，也请注释掉</li>
<li>如果用到资源上传的话，还需要给该部署用户分配操作本地文件系统或者 HDFS 或者 MinIO的权限</li>
</ul>
<p>坑：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">echo <span class="hljs-string">&quot;dolphinscheduler&quot;</span> | passwd --stdin dolphinscheduler<br></code></pre></td></tr></table></figure>
<p>这步会报错。linux的passwd命令没有–stdin的语法</p>
<p>应该用</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">echo <span class="hljs-string">&quot;dolphinscheduler:123456&quot;</span> | chpasswd<br></code></pre></td></tr></table></figure>
<p>修改用户dolphinscheduler密码为123456</p>
<p>另外这五条指令在第一次成功运行时都没有运行成功提示。<br><a name="rNXB2"></a></p>
<h4 id="3-ssh免密配置"><a href="#3-ssh免密配置" class="headerlink" title="3.ssh免密配置"></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494755&idx=3&sn=2e407bda03e3a392387a1f276f554927&chksm=e9bffd4fdec8745963dc186d565a7077e1dc7e4d05e3099f105aaec5111ef013a6dfe1779376&scene=21%23wechat_redirect&source=article&objectId=1909521">3.ssh免密配置</a></h4><ul>
<li>切换到部署用户并配置 ssh 本机免密登录</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">su dolphinscheduler<br><br>ssh-keygen -t rsa -P <span class="hljs-string">&#x27;&#x27;</span> -f ~<span class="hljs-regexp">/.ssh/i</span>d_rsa<br>cat ~<span class="hljs-regexp">/.ssh/i</span>d_rsa.<span class="hljs-property">pub</span> &gt;&gt; ~<span class="hljs-regexp">/.ssh/</span>authorized_keys<br>chmod <span class="hljs-number">600</span> ~<span class="hljs-regexp">/.ssh/</span>authorized_keys<br></code></pre></td></tr></table></figure>
<p>注意：正常设置后，dolphinscheduler 用户在执行命令 ssh localhost 是不需要再输入密码的</p>
<p>坑：这里运行会报错Could not create directory ‘&#x2F;home&#x2F;dolphinscheduler&#x2F;.ssh</p>
<p>需要先以root身份在&#x2F;home下创建dolphinscheduler目录再在dolphinscheduler里创建.ssh目录，</p>
<p>然后切换回dolphinscheduler用户执行。除此之外可能还需要对这些目录进行授权。<br><a name="XjudP"></a></p>
<h4 id="4-数据库初始化"><a href="#4-数据库初始化" class="headerlink" title="4.数据库初始化"></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494354&idx=1&sn=50123991ffe4e806bd18dc393e28efb5&chksm=e9bffbfedec872e87451bbacab6e7586452d42b3ae7f0b2789f12437e9dcf37c877867711e11&scene=21%23wechat_redirect&source=article&objectId=1909521">4.数据库初始化</a></h4><ul>
<li>进入数据库，默认数据库是 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/postgresql?from_column=20065&from=20065">PostgreSQL</a>，如选择 MySQL 的话，后续需要添加 mysql-connector-java 驱动包到 DolphinScheduler 的 lib 目录下</li>
</ul>
<p>mysql-connector-java下载网址：MySQL :: Download Connector&#x2F;J</p>
<p>注意切换下载linux版并且注意对应版本号。</p>
<p>这里对应的主要是ubuntu的版本而不是linux版本。</p>
<p><img src="/fzd.github.io/images/5.jpeg" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"></p>
<p>查看ubuntu版本的方法 ：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">cat /proc/version<br></code></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="/fzd.github.io/images/6.jpeg" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"></p>
<p>笔者用的18.04版本</p>
<p>下载好后放到DolphinScheduler 的 lib 目录下解压</p>
<p>但是笔者此处遇到一点问题，下载下来的文件解压后的结果似乎并不太常规，没法简单地tar解包</p>
<p>解决方法是在windows中解压，然后打开解压出的压缩包，该压缩包里.&#x2F;usr&#x2F;share&#x2F;java里有我们需要的mysql-connector-java-8.0.26.jar，取出来传入linux的lib文件夹下。</p>
<p>之后执行如下指令进入数据库：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">#启动mysql服务<br>service mysql start<br><br>#登录<br>mysql -uroot -p<br></code></pre></td></tr></table></figure>

<ul>
<li>此处遇到了另一个问题，运行service mysql start报错Failed to start mysql.service: Unit mysql.service not found.</li>
<li>解决方法：</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">#查询/etc/init.<span class="hljs-property">d</span>/下是否存在mysql，无结果说明不存在<br>ll /etc/init.<span class="hljs-property">d</span>/ | grep mysql<br><br>#查询mysql.<span class="hljs-property">server</span>所在位置<br>find / -name mysql.<span class="hljs-property">server</span><br><br>#把mysql.<span class="hljs-property">server</span>复制过去，其中/usr/local/mysql/是笔者的mysql安装目录<br>cp /usr/local/mysql/support-files/mysql.<span class="hljs-property">server</span> /etc/init.<span class="hljs-property">d</span>/mysql<br></code></pre></td></tr></table></figure>

<ul>
<li>进入数据库命令行窗口后，执行数据库初始化命令，设置访问账号和密码。注: {user} 和 {password} 需要替换为具体的数据库用户名和密码</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">mysql&gt; <span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">DATABASE</span> dolphinscheduler <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">CHARACTER</span> <span class="hljs-variable constant_">SET</span> utf8 <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">COLLATE</span> utf8_general_ci;<br>   mysql&gt; <span class="hljs-variable constant_">GRANT</span> <span class="hljs-variable constant_">ALL</span> <span class="hljs-variable constant_">PRIVILEGES</span> <span class="hljs-variable constant_">ON</span> dolphinscheduler.* <span class="hljs-variable constant_">TO</span> <span class="hljs-string">&#x27;&#123;user&#125;&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-variable constant_">IDENTIFIED</span> <span class="hljs-variable constant_">BY</span> <span class="hljs-string">&#x27;&#123;password&#125;&#x27;</span>;<br>   mysql&gt; <span class="hljs-variable constant_">GRANT</span> <span class="hljs-variable constant_">ALL</span> <span class="hljs-variable constant_">PRIVILEGES</span> <span class="hljs-variable constant_">ON</span> dolphinscheduler.* <span class="hljs-variable constant_">TO</span> <span class="hljs-string">&#x27;&#123;user&#125;&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> <span class="hljs-variable constant_">IDENTIFIED</span> <span class="hljs-variable constant_">BY</span> <span class="hljs-string">&#x27;&#123;password&#125;&#x27;</span>;<br>   mysql&gt; flush privileges;<br></code></pre></td></tr></table></figure>
<p>注：如果需要查看mysql中的用户及其密码可使用如下代码</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable constant_">SELECT</span> <span class="hljs-title class_">User</span>, <span class="hljs-title class_">Host</span>, <span class="hljs-title class_">Password</span> <span class="hljs-variable constant_">FROM</span> mysql.<span class="hljs-property">user</span>;<br></code></pre></td></tr></table></figure>
<p>创建表和导入基础数据</p>
<p>首先退出sql(按Ctrl+c)</p>
<p>接下来修改 conf 目录下 datasource.properties 中的下列配置</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">cd /usr/local/dolphinscheduler/dolphinscheduler-bin<br><br>vi conf/datasource.<span class="hljs-property">properties</span><br></code></pre></td></tr></table></figure>

<ul>
<li>如果选择 MySQL，请注释(用‘#’)掉 PostgreSQL 相关配置(反之同理)，还需要手动添加 [ mysql-connector-java 驱动 jar ] 包到 lib 目录下，这里下载的是 mysql-connector-java-5.1.47.jar，然后正确配置数据库连接相关信息</li>
<li>提示：切换至英文输入法，输入i进入修改状态，方向键改变光标位置，完成后先按Esc退出插入状态，再输入:wq保存并退出。:q可用来直接退出而不保存。</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># postgre<br>  # spring.<span class="hljs-property">datasource</span>.<span class="hljs-property">driver</span>-<span class="hljs-keyword">class</span>-name=org.<span class="hljs-property">postgresql</span>.<span class="hljs-property">Driver</span><br>  # spring.<span class="hljs-property">datasource</span>.<span class="hljs-property">url</span>=<span class="hljs-attr">jdbc</span>:<span class="hljs-attr">postgresql</span>:<span class="hljs-comment">//localhost:5432/dolphinscheduler</span><br>  # mysql<br>  spring.<span class="hljs-property">datasource</span>.<span class="hljs-property">driver</span>-<span class="hljs-keyword">class</span>-name=com.<span class="hljs-property">mysql</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">Driver</span><br>  spring.<span class="hljs-property">datasource</span>.<span class="hljs-property">url</span>=<span class="hljs-attr">jdbc</span>:<span class="hljs-attr">mysql</span>:<span class="hljs-comment">//xxx:3306/dolphinscheduler?useUnicode=true&amp;characterEncoding=UTF-8&amp;allowMultiQueries=true     # 需要修改ip，本机localhost即可</span><br>  spring.<span class="hljs-property">datasource</span>.<span class="hljs-property">username</span>=xxx      # 需要修改为上面的&#123;user&#125;值<br>  spring.<span class="hljs-property">datasource</span>.<span class="hljs-property">password</span>=xxx      # 需要修改为上面的&#123;password&#125;值<br></code></pre></td></tr></table></figure>

<ul>
<li>先把PostgreSQL 相关的代码注释掉，然后注意修改这里的xxx</li>
<li>修改并保存完后，执行 script 目录下的创建表及导入基础数据脚本</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sh script/create-dolphinscheduler.<span class="hljs-property">sh</span><br></code></pre></td></tr></table></figure>
<p>注意: 如果执行上述脚本提示 “&#x2F;bin&#x2F;java: No such file or directory” 错误，请在 &#x2F;etc&#x2F;profile 下配置 JAVA_HOME 及 PATH 变量</p>
<p>正好笔者此处也遇到了类似的问题：</p>
<p>script&#x2F;create-dolphinscheduler.sh: 37: script&#x2F;create-dolphinscheduler.sh: &#x2F;bin&#x2F;java: not found</p>
<p>那么我们就按照提示进入&#x2F;etc文件夹下的profile文件进行编辑吧：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">vi /etc/profile<br></code></pre></td></tr></table></figure>
<p>在最下方添加如下代码：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable constant_">JAVA_HOME</span>=<span class="hljs-regexp">/usr/</span>lib/jvm/java-<span class="hljs-number">8</span>-openjdk-amd64<br><span class="hljs-variable constant_">JRE_HOME</span>=<span class="hljs-regexp">/usr/</span>lib/jvm/java-<span class="hljs-number">8</span>-openjdk-amd64/jre<br><span class="hljs-variable constant_">PATH</span>=<br><br>$$<br><span class="hljs-variable constant_">JAVA_HOME</span>/<span class="hljs-attr">bin</span>:$JRE_HOME/<span class="hljs-attr">bin</span>:<br>$$<br><span class="hljs-variable constant_">PATH</span><br><span class="hljs-variable constant_">CLASSPATH</span>=.:<br><br>$$<br><span class="hljs-variable constant_">JAVA_HOME</span>/lib/dt.<span class="hljs-property">jar</span>:$JAVA_HOME/lib/tools.<span class="hljs-property">jar</span>:<br>$$<br><span class="hljs-variable constant_">JRE_HOME</span>/lib<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">JAVA_HOME</span> <span class="hljs-variable constant_">JRE_HOME</span> <span class="hljs-variable constant_">PATH</span> <span class="hljs-variable constant_">CLASSPATH</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>当然此处可能由于每个人jdk所在位置以及版本不同而需要做出适当修改。 如果之前使用的npm安装jdk，那么jdk很有可能被安装在&#x2F;usr&#x2F;lib&#x2F;jvm目录下 而我们所需的java文件地址为：&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-8-openjdk-amd64&#x2F;bin&#x2F;java （此处可能略有不同）</p>
</blockquote>
<p>:wq保存退出。</p>
<p>之后再敲入如下代码：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">source /etc/profile   <span class="hljs-comment">//使修改立即生效</span><br>echo $JAVA_HOME <span class="hljs-comment">//查看JAVA_HOME的值</span><br>javac -version<br></code></pre></td></tr></table></figure>
<p>第一条使设置生效，二三条检验配置是否成功。<br><a name="JspqL"></a></p>
<h4 id="5-修改运行参数"><a href="#5-修改运行参数" class="headerlink" title="5.修改运行参数"></a><strong>5.修改运行参数</strong></h4><ul>
<li>修改 &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;conf&#x2F;env 目录下的 dolphinscheduler_env.sh 环境变量(以相关用到的软件都安装在 &#x2F;opt&#x2F;soft 下为例)</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">vi /usr/local/dolphinscheduler/dolphinscheduler-bin/conf/env/dolphinscheduler_env.<span class="hljs-property">sh</span><br></code></pre></td></tr></table></figure>
<p>注释export SPARK_HOME1&#x3D;&#x2F;opt&#x2F;soft&#x2F;spark1这行</p>
<p>export DATAX_HOME&#x3D;&#x2F;opt&#x2F;soft&#x2F;datax&#x2F;bin&#x2F;datax这行加上.py</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">HADOOP_HOME</span>=<span class="hljs-regexp">/opt/</span>soft/hadoop<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">HADOOP_CONF_DIR</span>=<span class="hljs-regexp">/opt/</span>soft/hadoop/etc/hadoop<br># <span class="hljs-keyword">export</span> <span class="hljs-variable constant_">SPARK_HOME1</span>=<span class="hljs-regexp">/opt/</span>soft/spark1<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">SPARK_HOME2</span>=<span class="hljs-regexp">/opt/</span>soft/spark2<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">PYTHON_HOME</span>=<span class="hljs-regexp">/opt/</span>soft/python<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">JAVA_HOME</span>=<span class="hljs-regexp">/opt/</span>soft/java<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">HIVE_HOME</span>=<span class="hljs-regexp">/opt/</span>soft/hive<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">FLINK_HOME</span>=<span class="hljs-regexp">/opt/</span>soft/flink<br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">DATAX_HOME</span>=<span class="hljs-regexp">/opt/</span>soft/datax/bin/datax.<span class="hljs-property">py</span><br><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">PATH</span>=<br><br>$$<br><span class="hljs-variable constant_">HADOOP_HOME</span>/<span class="hljs-attr">bin</span>:$SPARK_HOME2/<span class="hljs-attr">bin</span>:<span class="hljs-attr">$PYTHON_HOME</span>:$JAVA_HOME/<span class="hljs-attr">bin</span>:$HIVE_HOME/<span class="hljs-attr">bin</span>:$FLINK_HOME/<span class="hljs-attr">bin</span>:<span class="hljs-attr">$DATAX_HOME</span>:<br>$$<br><span class="hljs-variable constant_">PATH</span><br></code></pre></td></tr></table></figure>
<p>注意: 这一步非常重要，例如 JAVA_HOME 和 PATH 是必须要配置的，没有用到的可以忽略或者注释掉；如果找不到 dolphinscheduler_env.sh，请运行 ls -a</p>
<ul>
<li>将 jdk 软链到 &#x2F;usr&#x2F;bin&#x2F;java 下(仍以 JAVA_HOME&#x3D;&#x2F;opt&#x2F;soft&#x2F;java 为例)</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sudo ln -s /opt/soft/java/bin/java /usr/bin/java<br></code></pre></td></tr></table></figure>

<ul>
<li>修改一键部署配置文件conf&#x2F;config&#x2F;install_config.conf中的各参数，特别注意以下参数的配置</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">vim /usr/local/dolphinscheduler/dolphinscheduler-bin/conf/config/install_config.<span class="hljs-property">conf</span><br></code></pre></td></tr></table></figure>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># 这里填 mysql or postgresql<br>dbtype=<span class="hljs-string">&quot;mysql&quot;</span><br><br># 数据库连接地址<br>dbhost=<span class="hljs-string">&quot;localhost:3306&quot;</span><br><br># 数据库名<br>dbname=<span class="hljs-string">&quot;dolphinscheduler&quot;</span><br><br># 数据库用户名，此处需要修改为上面设置的 &#123;user&#125; 具体值<br>username=<span class="hljs-string">&quot;xxx&quot;</span>    <br><br># 数据库密码，如果有特殊字符，请使用 \ 转义，需要修改为上面设置的 &#123;password&#125; 具体值<br>password=<span class="hljs-string">&quot;xxx&quot;</span><br><br># <span class="hljs-title class_">Zookeeper</span>地址，单机本机是 <span class="hljs-attr">localhost</span>:<span class="hljs-number">2181</span>，记得把 <span class="hljs-number">2181</span> 端口带上<br>zkQuorum=<span class="hljs-string">&quot;localhost:2181&quot;</span><br><br># 将 <span class="hljs-variable constant_">DS</span> 安装到哪个目录，如: <span class="hljs-regexp">/opt/</span>soft/dolphinscheduler，不同于现在的目录<br>installPath=<span class="hljs-string">&quot;/opt/soft/dolphinscheduler&quot;</span><br><br># 使用哪个用户部署，使用第 <span class="hljs-number">3</span> 节创建的用户<br>deployUser=<span class="hljs-string">&quot;dolphinscheduler&quot;</span><br><br># 邮件配置，以 qq 邮箱为例<br># 邮件协议<br>mailProtocol=<span class="hljs-string">&quot;SMTP&quot;</span><br><br># 邮件服务地址<br>mailServerHost=<span class="hljs-string">&quot;smtp.qq.com&quot;</span><br><br># 邮件服务端口<br>mailServerPort=<span class="hljs-string">&quot;25&quot;</span><br><br># mailSender 和 mailUser 配置成一样即可<br># 发送者<br>mailSender=<span class="hljs-string">&quot;xxx@qq.com&quot;</span><br><br># 发送用户<br>mailUser=<span class="hljs-string">&quot;xxx@qq.com&quot;</span><br><br># 邮箱密码<br>mailPassword=<span class="hljs-string">&quot;xxx&quot;</span><br><br># <span class="hljs-variable constant_">TLS</span> 协议的邮箱设置为 <span class="hljs-literal">true</span>，否则设置为 <span class="hljs-literal">false</span><br>starttlsEnable=<span class="hljs-string">&quot;true&quot;</span><br><br># 开启 <span class="hljs-variable constant_">SSL</span> 协议的邮箱配置为 <span class="hljs-literal">true</span>，否则为 <span class="hljs-literal">false</span>。注意: starttlsEnable 和 sslEnable 不能同时为 <span class="hljs-literal">true</span><br>sslEnable=<span class="hljs-string">&quot;false&quot;</span><br><br># 邮件服务地址值，参考上面 mailServerHost<br>sslTrust=<span class="hljs-string">&quot;smtp.qq.com&quot;</span><br><br># 业务用到的比如 sql 等资源文件上传到哪里，可以设置：<span class="hljs-variable constant_">HDFS</span>,<span class="hljs-variable constant_">S3</span>,<span class="hljs-variable constant_">NONE</span>，单机如果想使用本地文件系统，请配置为 <span class="hljs-variable constant_">HDFS</span>，因为 <span class="hljs-variable constant_">HDFS</span> 支持本地文件系统；如果不需要资源上传功能请选择 <span class="hljs-variable constant_">NONE</span>。强调一点：使用本地文件系统不需要部署 hadoop<br>resourceStorageType=<span class="hljs-string">&quot;HDFS&quot;</span><br><br># 这里以保存到本地文件系统为例<br># 注：但是如果你想上传到 <span class="hljs-variable constant_">HDFS</span> 的话，<span class="hljs-title class_">NameNode</span> 启用了 <span class="hljs-variable constant_">HA</span>，则需要将 hadoop 的配置文件 core-site.<span class="hljs-property">xml</span> 和 hdfs-site.<span class="hljs-property">xml</span> 放到 conf 目录下，本例即是放到 /opt/dolphinscheduler/conf 下面，并配置 namenode cluster 名称；如果 <span class="hljs-title class_">NameNode</span> 不是 <span class="hljs-variable constant_">HA</span>，则修改为具体的 ip 或者主机名即可<br>defaultFS=<span class="hljs-string">&quot;file:///data/dolphinscheduler&quot;</span>    #<span class="hljs-attr">hdfs</span>:<span class="hljs-comment">//&#123;具体的ip/主机名&#125;:8020</span><br><br># 如果没有使用到 <span class="hljs-title class_">Yarn</span>，保持以下默认值即可；如果 <span class="hljs-title class_">ResourceManager</span> 是 <span class="hljs-variable constant_">HA</span>，则配置为 <span class="hljs-title class_">ResourceManager</span> 节点的主备 ip 或者 hostname，比如 <span class="hljs-string">&quot;192.168.xx.xx,192.168.xx.xx&quot;</span> ;如果是单 <span class="hljs-title class_">ResourceManager</span> 请配置 yarnHaIps=<span class="hljs-string">&quot;&quot;</span> 即可<br># 注：依赖于yarn执行的任务，为了保证执行结果判断成功，需要确保yarn信息配置正确<br>yarnHaIps=<span class="hljs-string">&quot;192.168.xx.xx,192.168.xx.xx&quot;</span><br><br># 如果 <span class="hljs-title class_">ResourceManager</span> 是 <span class="hljs-variable constant_">HA</span> 或者没有使用到 <span class="hljs-title class_">Yarn</span> 保持默认值即可；如果是单 <span class="hljs-title class_">ResourceManager</span>，请配置真实的 <span class="hljs-title class_">ResourceManager</span> 主机名或者 ip<br>singleYarnIp=<span class="hljs-string">&quot;yarnIp1&quot;</span><br><br># 资源上传根路径，支持 <span class="hljs-variable constant_">HDFS</span> 和 <span class="hljs-variable constant_">S3</span>，由于 hdfs 支持本地文件系统，需要确保本地文件夹存在且有读写权限<br>resourceUploadPath=<span class="hljs-string">&quot;/data/dolphinscheduler&quot;</span><br><br># 具备权限创建 resourceUploadPath的用户<br>hdfsRootUser=<span class="hljs-string">&quot;hdfs&quot;</span><br>    <br># 配置 api server port<br>apiServerPort=<span class="hljs-string">&quot;12345&quot;</span><br><br># 在哪些机器上部署 <span class="hljs-variable constant_">DS</span> 服务，本机选 localhost<br>ips=<span class="hljs-string">&quot;localhost&quot;</span><br><br># ssh端口，默认<span class="hljs-number">22</span><br>sshPort=<span class="hljs-string">&quot;22&quot;</span><br><br># master服务部署在哪台机器上<br>masters=<span class="hljs-string">&quot;localhost&quot;</span><br><br># worker服务部署在哪台机器上，并指定此 worker 属于哪一个 worker 组，下面示例的 <span class="hljs-keyword">default</span> 即为组名<br>workers=<span class="hljs-string">&quot;localhost:default&quot;</span><br><br># 报警服务部署在哪台机器上<br>alertServer=<span class="hljs-string">&quot;localhost&quot;</span><br><br># 后端api服务部署在在哪台机器上<br>apiServers=<span class="hljs-string">&quot;localhost&quot;</span><br></code></pre></td></tr></table></figure>
<p>注：如果打算用到 资源中心 功能，请执行以下命令：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sudo mkdir /data/dolphinscheduler<br>sudo chown -R <span class="hljs-attr">dolphinscheduler</span>:dolphinscheduler /data/dolphinscheduler<br></code></pre></td></tr></table></figure>
<p><a name="G5YFg"></a></p>
<h4 id="6-一键部署"><a href="#6-一键部署" class="headerlink" title="6.一键部署"></a><strong>6.一键部署</strong></h4><ul>
<li>切换到部署用户，执行一键部署脚本</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sh install.<span class="hljs-property">sh</span><br></code></pre></td></tr></table></figure>
<p>注意：第一次部署的话，在运行中第3步 3,stop server 出现 5 次以下信息，此信息可以忽略</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">sh</span>: bin/dolphinscheduler-daemon.<span class="hljs-property">sh</span>: <span class="hljs-title class_">No</span> such file or directory<br></code></pre></td></tr></table></figure>

<ul>
<li>运行时报错：install.sh: 22: install.sh: source: not found 1.replace file install.sh: 28: install.sh: [[: not found install.sh: 34: [: &#x3D;&#x3D;: unexpected operator 2.create directory 3.scp resources &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;script&#x2F;scp-hosts.sh: 21: &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;script&#x2F;scp-hosts.sh: source: not found &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;script&#x2F;scp-hosts.sh: 24: &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;script&#x2F;scp-hosts.sh: [[: not found &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;script&#x2F;scp-hosts.sh: 29: &#x2F;usr&#x2F;local&#x2F;dolphinscheduler&#x2F;dolphinscheduler-bin&#x2F;script&#x2F;scp-hosts.sh: Syntax error: “(“ unexpected scp copy failed to exit</li>
</ul>
<p>原因：默认使用dash作为shell，但sh是bash shell的命令。</p>
<p>解决方案：</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">dpkg-reconfigure dash（需要root权限）<br>在界面中选择no<br>再运行ls -l /bin/sh 后显示/bin/sh -&gt; bash<br></code></pre></td></tr></table></figure>

<ul>
<li>再运行sh命令即可</li>
<li>脚本完成后，会启动以下 5 个服务，使用</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">jps<br></code></pre></td></tr></table></figure>
<p>命令查看服务是否启动( jps 为 JDK 自带)</p>
<ul>
<li>如果显示中包含：</li>
</ul>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">MasterServer</span>         ----- master服务<br>    <span class="hljs-title class_">WorkerServer</span>         ----- worker服务<br>    <span class="hljs-title class_">LoggerServer</span>         ----- logger服务<br>    <span class="hljs-title class_">ApiApplicationServer</span> ----- api服务<br>    <span class="hljs-title class_">AlertServer</span>          ----- alert服务<br></code></pre></td></tr></table></figure>
<p>如果以上服务都正常启动，说明自动部署成功</p>
<p>部署成功后，可以进行日志查看，日志统一存放于 logs 文件夹内</p>
<p>&#x2F;usr&#x2F;dolphinscheduler&#x2F;logs</p>
<p>代码语言：javascript</p>
<p>复制</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">logs/<br>    ├── dolphinscheduler-alert-server.<span class="hljs-property">log</span><br>    ├── dolphinscheduler-master-server.<span class="hljs-property">log</span><br>    |—— dolphinscheduler-worker-server.<span class="hljs-property">log</span><br>    |—— dolphinscheduler-api-server.<span class="hljs-property">log</span><br>    |—— dolphinscheduler-logger-server.<span class="hljs-property">log</span><br></code></pre></td></tr></table></figure>
<p><a name="f5mGV"></a></p>
<h4 id="7-登录系统"><a href="#7-登录系统" class="headerlink" title="7.登录系统"></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://mp.weixin.qq.com/s?__biz=MzI0NjU2NDkzMQ==&mid=2247494550&idx=1&sn=abdf05ddc46325b37400e66b0a5fa91a&chksm=e9bffabadec873ac8725efe1fda1e5f13fc304bd29c5985df4976266f86e747c47d09447ad88&scene=21%23wechat_redirect&source=article&objectId=1909521">7.登录系统</a></h4><p>访问前端页面地址，接口 ip (自行修改) <a target="_blank" rel="noopener" href="http://192.168.xx.xx:12345/dolphinscheduler">http://192.168.xx.xx:12345/dolphinscheduler</a></p>
<p><img src="/fzd.github.io/images/7.png" srcset="/fzd.github.io/img/loading.gif" lazyload alt="image.jpg"></p>
<p>部署完成，成功进入界面。</p>
<p>推荐参考文档：</p>
<p>官网网址：</p>
<p><a target="_blank" rel="noopener" href="https://dolphinscheduler.apache.org/zh-cn/">https://dolphinscheduler.apache.org/zh-cn/</a></p>
<p>官网使用教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1d64y1s7eZ">https://www.bilibili.com/video/BV1d64y1s7eZ</a></p>
<p>你可以在这里参考原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_50740678/article/details/120615253">https://blog.csdn.net/qq_50740678/article/details/120615253</a></p>
<p>本文参与 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/support-plan">腾讯云自媒体分享计划</a>，分享自微信公众号。</p>
<p>原始发表：2021-11-25，如有侵权请联系 <a href="mailto:cloudcommunity@tencent.com">cloudcommunity@tencent.com</a> 删除</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10178">bash</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10316">bash 指令</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10164">java</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10308">linux</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10245">云数据库 SQL Server</a></p>
<p>本文分享自 大数据真好玩 微信公众号，前往查看</p>
<p>如有侵权，请联系 <a href="mailto:cloudcommunity@tencent.com">cloudcommunity@tencent.com</a> 删除。</p>
<p>本文参与 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/support-plan">腾讯云自媒体分享计划</a>  ，欢迎热爱写作的你一起参与！</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10178">bash</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10316">bash 指令</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10164">java</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10308">linux</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10245">云数据库 SQL Server</a></p>
<blockquote>
<p>来自: <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1909521">保姆级超详细教程：DolphinScheduler单机(本地)部署及软件运行测试-腾讯云开发者社区-腾讯云</a></p>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div></div>
      <div>https://ximiedeyanhuo.github.io/fzd.github.io/2024/05/11/保姆级超详细教程：DolphinScheduler单机(本地)部署及软件运行测试-腾讯云开发者社区-腾讯云/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>拾光</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年5月11日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/fzd.github.io/2024/05/11/%E8%B0%81%E7%9A%84%E5%95%8A/" title="">
                        <span class="hidden-mobile"></span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/fzd.github.io/js/events.js" ></script>
<script  src="/fzd.github.io/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/fzd.github.io/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/fzd.github.io/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/fzd.github.io/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
